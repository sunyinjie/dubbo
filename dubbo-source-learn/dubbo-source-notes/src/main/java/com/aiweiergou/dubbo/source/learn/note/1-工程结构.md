# 项目模块关系图
![](/dubbo-source-learn/dubbo-source-notes/src/main/resources/img/模块关系.png)
# 职责模块介绍
## dubbo-common
通用模块，定义了一些通用的，与业务领域无关的工具类（比如：IO处理、日志处理、配置处理、类处理等等），线程池扩展，二进制代码处理，class编译处理，JSON处理，数据存储接口，系统版本号等等通用的类合接口。
## dubbo-rpc-api
分布式服务框架的核心，这个模块定义了rpc的一些抽象的rpc接口和实现类，包括服务发布，服务调用代理，远程调用结果及异常，rpc调用网络协议，rpc调用监听器和过滤器等等。该模块提供了默认的基于dubbo协议的实现模块，还提供了hessian、http、rest、rmi、thrift和webservice等协议的实现，还实现了injvm的本地调用实现，灵活性强，非常通用，能够满足绝大多数项目的使用需求，而且还可以自行实现rpc协议。
## dubbo-registry-api
注册中心，它是rpc中的consumer和provider两个重要角色的协调者。该项目定义了核心的注册中心接口和实现。具体实现留给了其它项目。有一个默认的实现模块，组册中心提供了mutilcast、redis和zookeeper等多种方式的注册中心实现，用于不同的使用场景。
## dubbo-remoting-api
远程通讯模块。rpc的实现基础就是远程通讯，consmer要调用provider的远程方法必须通过网络远程通讯实现。该模块定义了远程传输器、终端（endpoint）、客户端、服务端、编码解码器、数据交换、缓冲区、通讯异常定义等等核心的接口及类构成。他是对于远程网络通讯的抽象。提供了诸如netty、mina、grizzly、http、p2p和zookeeper的协议和技术框架的实现方式。
## dubbo-monitor-api
监控模块，通过该模块可以监控服务调用的各种信息，例如调用耗时、调用量、调用结果等等，监控中心在调用过程中收集调用的信息，发送到监控服务，在监控服务中可以存储这些信息，对这些数据进行统计分析，最终可以产生各种维护的调用监控信息。dubbo默认提供了一个实现，该实现非常简单，只是作为默认的实现范例，生产环境使用价值不高，需要自行实现自己的监控。
## dubbo-container-api
服务运行容器模块，定义了启动容器列表的包含应用程序入口main方法的类Main；定义了容器接口Container，该接口包含了启动和停止方法定义；还有一些通用的分页功能的相关类。dubbo内置了javaconfig、jetty、log4j、logback和spring几种容器的实现。
## dubbo-config-api
配置模块，依赖了几乎所有的其它模块，通过它的配置和组装将dubbo组件的多个模块整合在一起给最终的开发者提供有价值的分布式服务框架。通过它的配置可以让开发者选择符合自己需求和使用场景的模块和技术，它定义了面向dubbo使用者的各种信息配置，比如服务发布配置、方法发布配置、服务消费配置、应用程序配置、注册中心配置、协议配置、监控配置等等。另外还有一个spring的配置模块，定义了一些spring的XML Schema，能够大大简化使用dubbo的配置，可以大大降低spring使用场景的学习和配置成本。
## dubbo-cluster
集群模块。支持远程服务的集群，支持多种集群调用策略，包括failover,failsafe,failfast,failback,forking等。并且支持目录服务，注册中心就是目录服务的一种实现，支持负载均衡，该模块还实现了路由器特性，此外还包括合并技术，当将调用请求分发给所有的服务提供者，则会返回多个结果，则将多个结果合并需要用到合并器的实现，该模块也是非常重要的一个模块。
## dubbo-admin
web应用，可以独立部署，它可以管理dubbo服务，通过该管理应用可以连接注册中心，重点是读取注册中心中的信息，也可以通过该应用改写注册中心的信息，从而实现动态的管控服务。该模块的功能也非常简单，对于实际的生产使用场景，还需要对该应用的功能进行扩展和定制，以满足实际的使用场景。
# 分层设计模型<br>
底层是一些通用和支撑性的通用模块，比如dubbo-commom、dubbo-remoting-api，它们是非常通用的，不解决任何领域业务问题，可使用于全部或者多数业务领域模块；<br>
中间层是核心业务领域模块。它们相互组合协作完成一个完整的对使用者有价值的功能特性，分布式服务框架里面就是dubbo-rpc-api远程调用、dubbo-registry-api是注册中心、dubbo-monitor-api是监控中心和dubbo-container-api等。模块化设计降低了代码复杂度和缩小了关注焦点，也有利于分工协作，还方便各模块能够独立演变；结构化良好的中间层才能够灵活应对各种技术和业务需求的演变；<br>
上层是用户界面模块。该层会将结构化良好的中间层服务进行配置和组装，整合成为一个对用户有价值的打包服务，在该层要考虑的是用户体验，降低用户的学习和使用成本，这就需要面向用户类型、用户使用场景进行设计，用户类型需要了解用户掌握的知识，环境和使用场景，依据这些特性进行设计，面向原生java环境使用dubbo-config-api模块去配置使用dubbo，面向使用spring环境则使用dubbo-config-spring模块，该层是主要是为了降低用户的学习使用成本，填补内部结构和用户之间的知识、技能方面的鸿沟。
# 整体架构和流程图
## 架构
![](/dubbo-source-learn/dubbo-source-notes/src/main/resources/img/架构图.jpg)
## 流程图
![](/dubbo-source-learn/dubbo-source-notes/src/main/resources/img/流程图.jpg)
